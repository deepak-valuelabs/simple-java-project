pipeline {
  agent any
  stages {
    stage('checkout the code') {
      steps {
        checkout scm
      }
    }
    stage ("build my code") {
      steps {
        echo "running compile for my code"
        sh "mvn compile"
      }
    }
    stage ("test my code") {
      when {
      expression {
        env.Testrun == "true"
        }
      }
      steps {
        sh "mvn test"
      }
    }
    stage ("package my code") {
      steps {
        sh "mvn package"
      }
    }
  }
}
